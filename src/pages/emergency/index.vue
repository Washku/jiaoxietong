<template>
  <view class="emergency-container">
    <view class="location-card">
      <view class="location-title">å½“å‰ä½ç½®</view>
      <view class="location-text">æ­£åœ¨è·å–ä½ç½®ä¿¡æ¯...</view>
    </view>

    <view class="service-grid">
      <!-- æŠ¥è­¦æœåŠ¡ -->
      <view class="service-item" @tap="onCallPolice">
        <view class="service-icon police">
          <text class="icon">ğŸ‘®</text>
        </view>
        <text class="service-name">ä¸€é”®æŠ¥è­¦</text>
        <text class="service-number">110</text>
      </view>

      <!-- æ•‘æŠ¤è½¦ -->
      <view class="service-item" @tap="onCallAmbulance">
        <view class="service-icon ambulance">
          <text class="icon">ğŸš‘</text>
        </view>
        <text class="service-name">å‘¼å«æ•‘æŠ¤</text>
        <text class="service-number">120</text>
      </view>

      <!-- é“è·¯æ•‘æ´ -->
      <view class="service-item" @tap="onCallRoadside">
        <view class="service-icon roadside">
          <text class="icon">ğŸš—</text>
        </view>
        <text class="service-name">é“è·¯æ•‘æ´</text>
        <text class="service-number">400</text>
      </view>

      <!-- äº¤é€šäº‹æ•…å¤„ç† -->
      <view class="service-item" @tap="onCallTraffic">
        <view class="service-icon traffic">
          <text class="icon">ğŸš¦</text>
        </view>
        <text class="service-name">äº¤é€šäº‹æ•…</text>
        <text class="service-number">122</text>
      </view>
    </view>

    <view class="notice">
      <text class="notice-title">æ¸©é¦¨æç¤º</text>
      <text class="notice-text">1. å¦‚é‡ç´§æ€¥æƒ…å†µï¼Œè¯·ä¼˜å…ˆæ‹¨æ‰“æŠ¥è­¦ç”µè¯</text>
      <text class="notice-text">2. ç¡®ä¿æ‚¨çš„ä½ç½®ä¿¡æ¯å‡†ç¡®æ— è¯¯</text>
      <text class="notice-text">3. ä¿æŒç”µè¯ç•…é€šï¼Œç­‰å¾…æ•‘æ´äººå‘˜åˆ°è¾¾</text>
    </view>
  </view>
</template>

<script setup>
import { ref, onMounted } from 'vue'

// æ‹¨æ‰“ç”µè¯
const makePhoneCall = (number) => {
  uni.makePhoneCall({
    phoneNumber: number,
    success: () => {
      console.log('æ‹¨æ‰“ç”µè¯æˆåŠŸ')
    },
    fail: () => {
      uni.showToast({
        title: 'æ‹¨æ‰“ç”µè¯å¤±è´¥',
        icon: 'none'
      })
    }
  })
}

// å„ç§æœåŠ¡çš„æ‹¨æ‰“ç”µè¯äº‹ä»¶
const onCallPolice = () => makePhoneCall('110')
const onCallAmbulance = () => makePhoneCall('120')
const onCallRoadside = () => makePhoneCall('400-810-0122') // ç¤ºä¾‹å·ç 
const onCallTraffic = () => makePhoneCall('122')
</script>

<style lang="scss">
.emergency-container {
  min-height: 100vh;
  background: #f5f5f5;
  padding: 20rpx;
}

.location-card {
  background: #fff;
  border-radius: 24rpx;
  padding: 30rpx;
  margin-bottom: 20rpx;
  
  .location-title {
    font-size: 28rpx;
    color: #666;
    margin-bottom: 10rpx;
  }
  
  .location-text {
    font-size: 32rpx;
    color: #333;
  }
}

.service-grid {
  display: grid;
  grid-template-columns: repeat(2, 1fr);
  gap: 20rpx;
  margin-bottom: 20rpx;
}

.service-item {
  background: #fff;
  border-radius: 24rpx;
  padding: 30rpx;
  display: flex;
  flex-direction: column;
  align-items: center;
  box-shadow: 0 4rpx 12rpx rgba(0, 0, 0, 0.05);
  
  .service-icon {
    width: 120rpx;
    height: 120rpx;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    margin-bottom: 20rpx;
    
    .icon {
      font-size: 60rpx;
    }
    
    &.police {
      background: rgba(108, 111, 216, 0.1);
    }
    
    &.ambulance {
      background: rgba(255, 107, 107, 0.1);
    }
    
    &.roadside {
      background: rgba(255, 165, 2, 0.1);
    }
    
    &.traffic {
      background: rgba(46, 213, 115, 0.1);
    }
  }
  
  .service-name {
    font-size: 32rpx;
    color: #333;
    margin-bottom: 8rpx;
  }
  
  .service-number {
    font-size: 24rpx;
    color: #666;
  }
}

.notice {
  background: #fff;
  border-radius: 24rpx;
  padding: 30rpx;
  
  .notice-title {
    font-size: 32rpx;
    color: #333;
    margin-bottom: 20rpx;
    display: block;
  }
  
  .notice-text {
    font-size: 26rpx;
    color: #666;
    line-height: 1.6;
    display: block;
  }
}
</style> 